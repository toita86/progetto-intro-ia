<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <link rel="stylesheet" type="text/css" href="/static/main.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="/static/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <title>Uniform Coloring</title>
  </head>
  <body>
    <header class="header text-white py-4">
      <h2 class="display-4 font-weight-bolder text-center">
        Uniform Coloring app!
      </h2>
      <button class="btn btn-success" onclick="location.reload()">
        Refresh
      </button>
    </header>
    <div class="jumbotron" style="font-size: x-large">
      <p class="text-justify">
        <strong>Uniform Coloring</strong> è un dominio in cui si hanno a
        disposizione alcune celle da colorare, e vari colori a disposizione. Per
        semplicità immaginiamo una griglia rettangolare in cui è possibile
        spostare una testina colorante fra le celle attigue secondo le 4
        direzioni cardinali <strong>(N,S,E,W)</strong>, senza uscire dalla
        griglia. Tutte le celle hanno un colore di partenza:
        <span class="font-weight-bold text-primary m-0">B=blu, </span>
        <span class="font-weight-bold text-warning">Y=yellow, </span>
        <span class="font-weight-bold text-success">G=green </span>
        ad eccezione di quella in cui si trova la testina indicata con T. La
        testina può colorare la cella in cui si trova con uno qualsiasi dei
        colori disponibili a differenti costi
        <strong>(cost(B)=1, cost(Y)=2, cost(G)=3)</strong>, mentre gli
        spostamenti hanno tutti costo uniforme pari a 1.
      </p>
      <p class="text-justify">
        <strong style="color: red"
          >L'obiettivo è colorare tutte le celle dello stesso colore (non
          importa quale) e riportare la testina nella sua posizione di
          partenza.</strong
        >
        Partendo dalla posizione iniziale della testina e combinando azioni di
        spostamento e colorazione, si chiede di trovare la sequenza di azioni
        dell'agente per raggiungere l'obiettivo. La posizione iniziale della
        testina, la struttura della griglia e la colorazione iniziale delle
        celle sono passati al sistema tramite un'immagine.
      </p>
    </div>
    <div
      class="container d-flex flex-column justify-content-center align-items-center vh-50"
    >
      <h2 class="font-weight-bold">You can choose between taking a pic</h2>
      <img
        class="img-fluid"
        src="{{url_for('video_feed')}}"
        alt="100%"
        style="border-radius: 15px; width: 4000px auto"
      />
    </div>
    <div class="containerb text-center" style="margin-top: 20px">
      <h2 class="font-weight-bold">or maybe upload an image</h2>
      <p>The last image uploaded will be used as the input for the coloring</p>
      <form id="upload-form" enctype="multipart/form-data">
        <div class="input-group mb-3" style="width: 40%; margin: 0 auto">
          <input
            type="file"
            id="image-selector"
            class="form-control"
            name="file"
            accept="image/*"
          />
          <div class="d-inline-flex">
            <button
              class="btn btn-success"
              type="submit"
              onclick="uploadImage(event)"
            >
              Upload
            </button>
          </div>
        </div>
      </form>
    </div>
    <div class="container text-center" id="uploaded-image"></div>
    <div class="container text-center" style="padding-bottom: 100px">
      <button id="save-image-button" class="buttons" onclick="saveImage()">
        <span class="rainbow">Save image</span>
      </button>
      <button
        id="process-image-button"
        class="buttons"
        onclick="processImage()"
      >
        <span class="rainbow">Process image</span>
      </button>
      <button id="train-model-button" class="buttons" onclick="trainModel()">
        <span class="rainbow">Train model</span>
      </button>
    </div>
    <div id="success-message" class="text-center"></div>
    <div id="progress-container" style="display: none; padding-bottom: 80px">
      <div class="progress pd-3">
        <div
          class="progress-bar progress-bar-striped bg-primary"
          role="progressbar"
          style="width: 0%"
          aria-valuenow="0"
          aria-valuemin="0"
          aria-valuemax="100"
        ></div>
      </div>
      <p id="progress-message" class="text-center">Training in progress...</p>
    </div>
    <div id="results"></div>

    <footer class="footer py-3 text-white">
      <div class="container text-center containerf">
        <span>&copy; Progetto Introduzione all'intelligenza artificiale</span
        ><br />
        <span>Eduard Brahas - Chionne Daniel</span>
      </div>
      <button class="btn btn-success" onclick="location.reload()">
        Refresh
      </button>
    </footer>
  </body>
</html>
